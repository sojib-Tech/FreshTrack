{% extends 'base.html' %}

{% block title %}Seller Dashboard - FreshTrack{% endblock %}

{% block content %}
<h1>üìä Seller Dashboard</h1>

<div class="stats">
    <div class="stat-box">
        <div class="stat-value">{{ products.count }}</div>
        <div class="stat-label">Total Products</div>
    </div>
    <div class="stat-box">
        <div class="stat-value">{{ seller.rating|default:"0" }}</div>
        <div class="stat-label">Rating</div>
    </div>
    <div class="stat-box">
        <div class="stat-value">${{ seller.total_sales|default:"0" }}</div>
        <div class="stat-label">Total Sales</div>
    </div>
</div>

<div style="margin: 30px 0;">
    <a href="{% url 'add_product' %}" class="btn btn-success">‚ûï Add New Product</a>
    <a href="{% url 'seller_alerts' %}" class="btn btn-warning">üîî View Alerts</a>
</div>

<h2>Your Products</h2>
<div class="product-grid">
    {% for product in products %}
    <div class="product-card">
        <div class="product-header">
            <div class="product-name">{{ product.name }}</div>
            <div class="product-price">${{ product.price }}</div>
        </div>
        <div class="product-info">
            <div class="info-row">
                <span class="label">Stock:</span>
                <span class="value">{{ product.quantity }} units</span>
            </div>
            <div class="hours-left">‚è±Ô∏è <span data-expiry="{{ product.expiry_datetime.timestamp|floatformat:0 }}000">{{
                    product.countdown_timer }}</span></div>
            <span class="alert-badge alert-{{ product.alert_level }}">
                {% if product.alert_level == 'expired' %}
                Expired
                {% elif product.alert_level == 'last_chance' %}
                Last Chance
                {% elif product.alert_level == 'urgent' %}
                Urgent Alert
                {% elif product.alert_level == 'soon' %}
                Expiring Soon
                {% elif product.alert_level == 'warning' %}
                Early Warning
                {% else %}
                Fresh
                {% endif %}
            </span>
            <div class="info-row" style="margin-top: 10px;">
                <span class="label">Status:</span>
                <span class="status-badge status-{{ product.status }}">
                    {{ product.get_status_display }}
                </span>
            </div>
        </div>
        <div class="product-footer">
            <a href="{% url 'edit_product' product.id %}" class="btn btn-secondary">‚úé Edit</a>
        </div>
    </div>
    {% empty %}
    <div style="grid-column: 1 / -1; text-align: center; background: white; padding: 40px; border-radius: 8px;">
        <p>No products yet. <a href="{% url 'add_product' %}">Add your first product</a></p>
    </div>
    {% endfor %}
</div>
{% endblock %}